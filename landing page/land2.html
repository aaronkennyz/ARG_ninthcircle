<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NINTH CIRCLE - NODE 9</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts: VT323 (Terminal) -->
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <!-- Horror font for the scare -->
    <link href="https://fonts.googleapis.com/css2?family=Nosifer&display=swap" rel="stylesheet">

    <style>
        :root {
            --terminal-red: #ff3333;
            --terminal-bg: #120202;
            --terminal-dim: #4d0f0f;
            --scanline-color: rgba(0, 0, 0, 0.5);
        }

        body {
            background-color: #000;
            color: var(--terminal-red);
            font-family: 'VT323', monospace;
            overflow-x: hidden;
            height: 100vh;
            margin: 0;
            font-size: 1.25rem;
            text-shadow: 0 0 4px rgba(255, 51, 51, 0.6), 0 0 2px rgba(255, 0, 0, 0.4);
        }

        /* --- CRT SCREEN EFFECTS --- */
        .crt-container {
            position: relative;
            min-height: 100vh;
            background-color: var(--terminal-bg);
            padding: 2rem;
            box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.9);
            overflow-y: auto;
            transition: background-color 2s ease;
        }

        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(to bottom,
                    rgba(255, 255, 255, 0),
                    rgba(255, 255, 255, 0) 50%,
                    rgba(0, 0, 0, 0.4) 50%,
                    rgba(0, 0, 0, 0.4));
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 50;
        }

        .flicker-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(255, 0, 0, 0.02);
            opacity: 0;
            z-index: 50;
            pointer-events: none;
            animation: flicker 0.15s infinite;
        }

        @keyframes flicker {
            0% {
                opacity: 0.02;
            }

            50% {
                opacity: 0.06;
            }

            100% {
                opacity: 0.02;
            }
        }

        /* UI Elements */
        .border-terminal {
            border: 2px solid var(--terminal-red);
        }

        .bg-terminal-block {
            background-color: var(--terminal-red);
            color: #000;
        }

        .blink {
            animation: blinker 1s linear infinite;
        }

        @keyframes blinker {
            50% {
                opacity: 0;
            }
        }

        input {
            background: transparent;
            border: none;
            color: var(--terminal-red);
            font-family: 'VT323', monospace;
            text-shadow: 0 0 4px rgba(255, 51, 51, 0.6);
        }

        input:focus {
            outline: none;
            background: rgba(255, 51, 51, 0.1);
        }

        ::selection {
            background: var(--terminal-red);
            color: black;
        }

        .ascii-art {
            font-size: 10px;
            line-height: 10px;
            white-space: pre;
            overflow-x: hidden;
            color: var(--terminal-red);
        }

        .loading-bar {
            width: 0%;
            height: 100%;
            background-color: var(--terminal-red);
            animation: load 2s ease-out forwards;
        }

        @keyframes load {
            0% {
                width: 0%;
            }

            100% {
                width: 66%;
            }
        }

        /* --- FADING MECHANIC CLASSES --- */
        .fade-target {
            transition: opacity 1s ease, filter 1s ease;
        }

        /* --- JUMPSCARE & GAME OVER STYLES --- */
        #jumpscare-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: black;
            z-index: 100;
            display: none;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .demon-face {
            width: 80vmin;
            height: 80vmin;
            fill: #ff0000;
            filter: drop-shadow(0 0 20px red);
            animation: scream 0.2s infinite linear;
        }

        .fire-bg {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(0deg, #500000 0%, transparent 80%);
            animation: burn 0.5s infinite alternate;
            z-index: -1;
            mix-blend-mode: hard-light;
        }

        @keyframes scream {
            0% {
                transform: scale(1) translate(0, 0);
            }

            25% {
                transform: scale(1.1) translate(-5px, 5px);
            }

            50% {
                transform: scale(1.05) translate(5px, -5px);
            }

            75% {
                transform: scale(1.15) translate(-5px, -5px);
            }

            100% {
                transform: scale(1) translate(0, 0);
            }
        }

        @keyframes burn {
            0% {
                opacity: 0.5;
                height: 90%;
            }

            100% {
                opacity: 1;
                height: 100%;
            }
        }

        #game-over-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            color: red;
            z-index: 101;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Nosifer', cursive;
        }

        /* Shake animation for input on wrong guess */
        .shake-input {
            animation: shake 0.5s cubic-bezier(.36, .07, .19, .97) both;
        }

        @keyframes shake {

            10%,
            90% {
                transform: translate3d(-1px, 0, 0);
            }

            20%,
            80% {
                transform: translate3d(2px, 0, 0);
            }

            30%,
            50%,
            70% {
                transform: translate3d(-4px, 0, 0);
            }

            40%,
            60% {
                transform: translate3d(4px, 0, 0);
            }
        }
    </style>
</head>

<body>

    <!-- CRT Effects -->
    <div class="scanlines"></div>
    <div class="flicker-overlay"></div>

    <!-- JUMPSCARE CONTAINER -->
    <div id="jumpscare-overlay">
        <div class="fire-bg"></div>
        <!-- Demonic Face SVG (Baphomet/Goat Head) -->
        <svg class="demon-face" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M463.5 60.5c-4.1-9.3-13.4-15.5-23.6-15.5H346.9c-10.4 0-20.3 4-28.1 11.2-14.4 13.4-33.6 21.8-54.8 21.8s-40.4-8.4-54.8-21.8c-7.8-7.2-17.7-11.2-28.1-11.2H72.1c-10.2 0-19.5 6.2-23.6 15.5-13.6 30.9-18.7 68.1-14.9 107.6 11.8 122.1 113.6 219.6 238.4 219.6s226.6-97.5 238.4-219.6c3.8-39.5-1.3-76.7-14.9-107.6zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80zm0-256c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40z"
                class="fill-current" />
            <!-- Eyes -->
            <circle cx="176" cy="256" r="16" fill="red" filter="drop-shadow(0 0 10px red)" />
            <circle cx="336" cy="256" r="16" fill="red" filter="drop-shadow(0 0 10px red)" />
            <!-- Pentagram Symbol on Forehead -->
            <path d="M256 112l18.8 58.2H336l-49.4 35.9 18.8 58.2L256 228.4l-49.4 35.9 18.8-58.2L176 170.2h61.2L256 112z"
                fill="red" opacity="0.5" />
        </svg>
    </div>

    <!-- GAME OVER SCREEN -->
    <div id="game-over-screen">
        <h1 class="text-6xl text-center mb-8 animate-pulse text-red-600">YOU ARE CONSUMED</h1>
        <p class="font-mono text-xl text-red-400 mb-8">The Circle has closed around you.</p>
        <button onclick="location.reload()"
            class="border-2 border-red-600 px-6 py-2 font-mono text-red-600 hover:bg-red-900 hover:text-white transition-colors uppercase">
            Try Again
        </button>
    </div>

    <!-- Main Terminal Container -->
    <div class="crt-container max-w-screen-xl mx-auto" id="main-terminal">

        <!-- HEADER (Fade Target) -->
        <header class="fade-target border-b-2 border-red-600 pb-4 mb-8">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-end">
                <div>
                    <div class="ascii-art mb-2 hidden sm:block opacity-70">
                        ___ __ __
                        |_ _| \ \/ /
                        | | \ /
                        | | / \
                        |___| /_/\_\
                    </div>
                    <h1 class="text-5xl uppercase tracking-widest font-bold">THE NINTH CIRCLE</h1>
                    <h2 class="text-xl opacity-80 tracking-[0.2em]">INTERNAL SURVEILLANCE NODE // LEVEL 9</h2>
                </div>
                <div class="mt-4 md:mt-0 text-right font-mono text-sm">
                    <p>TERMINAL: HADES-01</p>
                    <p>DATE: <span id="current-date"></span></p>
                    <p>STATUS: <span class="bg-terminal-block px-1 font-bold animate-pulse">WATCHING</span></p>
                </div>
            </div>

            <div class="mt-4 border-t border-red-900 pt-2 text-sm overflow-hidden whitespace-nowrap text-red-400">
                <p class="animate-[marquee_25s_linear_infinite]">
                    *** WARNING: BETRAYAL IS PUNISHABLE BY EXILE *** THE EYES ARE ALWAYS OPEN *** DO NOT DISTRIBUTE
                    SACRED TEXTS *** BRITTO INCIDENT LOGGED ***
                </p>
            </div>
        </header>

        <!-- LAYOUT GRID -->
        <div class="grid grid-cols-1 md:grid-cols-12 gap-8">

            <!-- LEFT COLUMN: COMMANDS & STATUS (Fade Target) -->
            <aside class="fade-target md:col-span-3 space-y-6">
                <div class="border-terminal p-4 relative bg-red-950/20">
                    <div class="absolute -top-3 left-4 bg-[#120202] px-2 text-sm text-red-500">RITUAL STATUS</div>
                    <ul class="space-y-2 text-lg">
                        <li class="flex justify-between"><span>OMNI-NET</span> <span class="text-red-400">ONLINE</span>
                        </li>
                        <li class="flex justify-between"><span>SECRECY</span> <span class="text-red-400">ACTIVE</span>
                        </li>
                        <li class="flex justify-between"><span>INTRUDER</span> <span
                                class="blink text-white bg-red-600 px-1">DETECTED</span></li>
                    </ul>
                </div>

                <div class="border-terminal p-4 relative h-64 bg-red-950/20">
                    <div class="absolute -top-3 left-4 bg-[#120202] px-2 text-sm text-red-500">ACCESS MENU</div>
                    <nav class="flex flex-col gap-2 text-xl cursor-pointer">
                        <a class="hover:bg-red-900/50 hover:text-white px-2 py-1 before:content-['>_'] before:mr-2">INITIATE
                            LIST</a>
                        <a class="hover:bg-red-900/50 hover:text-white px-2 py-1 before:content-['>_'] before:mr-2">RITUAL
                            SITES</a>
                        <a class="hover:bg-red-900/50 hover:text-white px-2 py-1 before:content-['>_'] before:mr-2">THE
                            BRITTO FILE</a>
                        <a href="#"
                            class="mt-auto border-t border-red-900 pt-2 opacity-50 hover:opacity-100 px-2">X_SEVER
                            CONNECTION</a>
                    </nav>
                </div>
            </aside>

            <!-- RIGHT COLUMN: DATA READOUT -->
            <main class="md:col-span-9 space-y-8 flex flex-col h-full">

                <!-- CONTENT TO FADE -->
                <div class="fade-target">
                    <div class="border-b border-dashed border-red-900 pb-4">
                        <h3 class="text-2xl mb-1">> TARGET: BRITTO_FINAL_HOURS</h3>
                        <p class="opacity-70 text-lg">LOCATION: SECTOR 4 [LIBRARY BASEMENT]</p>
                    </div>

                    <div class="mt-8">
                        <h4 class="bg-terminal-block inline-block px-2 text-xl mb-4 font-bold">CIRCLE MEMBERS // WATCH
                            LIST</h4>

                        <div
                            class="flex flex-col sm:flex-row gap-4 mb-6 border border-red-900 p-4 hover:border-red-500 hover:bg-red-950/30 transition-all cursor-crosshair group">
                            <div
                                class="w-32 h-32 border border-red-800 flex items-center justify-center bg-red-950/40 shrink-0">
                                <i data-lucide="skull" class="w-12 h-12 opacity-70"></i>
                            </div>
                            <div class="w-full">
                                <div class="flex justify-between border-b border-red-900 pb-1 mb-2">
                                    <span class="text-xl font-bold">ALIAS: THE PROFESSOR</span>
                                    <span class="text-sm border border-red-600 px-1 text-red-300">RANK: MAGUS</span>
                                </div>
                                <p class="text-lg opacity-90">STATUS: <span class="text-red-400">SUSPICIOUS</span></p>
                                <p class="text-sm text-red-300/80 mt-2">NOTES: Holds the key to the archives. Seen with
                                    the cipher key.</p>
                            </div>
                        </div>

                        <div
                            class="flex flex-col sm:flex-row gap-4 mb-6 border border-red-900 p-4 hover:border-red-500 hover:bg-red-950/30 transition-all cursor-crosshair group">
                            <div
                                class="w-32 h-32 border border-red-800 flex items-center justify-center bg-red-950/40 shrink-0">
                                <span class="text-4xl font-bold">?</span>
                            </div>
                            <div class="w-full">
                                <div class="flex justify-between border-b border-red-900 pb-1 mb-2">
                                    <span class="text-xl font-bold">ALIAS: SHADOW_9</span>
                                    <span class="text-sm border border-red-600 px-1 text-red-300">RANK: INITIATE</span>
                                </div>
                                <p class="text-lg opacity-90">STATUS: <span
                                        class="blink text-white bg-red-600 px-1">HUNTING</span></p>
                                <p class="text-sm text-red-300/80 mt-2">NOTES: The enforcer. Responsible for the
                                    "accident."</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- COMMAND LINE INPUT (Must Remain Visible) -->
                <div class="mt-auto pt-8 border-t-2 border-red-600 z-10 bg-[#120202]">
                    <p class="mb-2 uppercase text-sm tracking-widest text-red-400">Enter Cipher to breach Level 2:</p>
                    <div class="flex items-center text-2xl bg-red-950/30 p-2 border border-red-900/50"
                        id="input-container">
                        <span class="mr-2 text-red-500">ROOT@IX_CIRCLE:~#</span>
                        <input type="text" id="final-cipher"
                            class="w-full bg-transparent border-none outline-none uppercase text-red-100 placeholder-red-900"
                            placeholder="_" autofocus autocomplete="off">
                        <span class="blink w-3 h-6 bg-red-500 ml-1"></span>
                    </div>
                    <div id="attempt-warning" class="text-xs text-red-600 mt-2 h-4 font-mono"></div>
                </div>

            </main>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // Date
        document.getElementById('current-date').innerText = `10-31-1985`;

        // --- GAME LOGIC ---
        let attempts = 0;
        const maxAttempts = 5;

        // Elements to fade
        const fadeTargets = document.querySelectorAll('.fade-target');
        const inputField = document.getElementById('final-cipher');
        const inputContainer = document.getElementById('input-container');
        const warningText = document.getElementById('attempt-warning');
        const jumpscareOverlay = document.getElementById('jumpscare-overlay');
        const gameOverScreen = document.getElementById('game-over-screen');
        const mainTerminal = document.getElementById('main-terminal');

        function handleIncorrectAttempt() {
            attempts++;
            const remaining = maxAttempts - attempts;

            // Shake Effect
            inputContainer.classList.add('shake-input');
            setTimeout(() => inputContainer.classList.remove('shake-input'), 500);

            // Progressive Fading Logic
            const opacityLevel = 1 - (attempts * 0.2); // 0.8, 0.6, 0.4, 0.2, 0

            fadeTargets.forEach(el => {
                el.style.opacity = opacityLevel;
                // Optional: Add blur as sanity slips
                el.style.filter = `blur(${attempts * 1}px) grayscale(${attempts * 20}%)`;
            });

            // Warning Messages
            if (attempts === 1) warningText.innerText = "WARNING: UNRECOGNIZED HASH. 4 ATTEMPTS REMAIN.";
            if (attempts === 2) warningText.innerText = "WARNING: INTRUSION DETECTED. TRACE INITIATED.";
            if (attempts === 3) warningText.innerText = "SYSTEM FAILURE IMMINENT. THE CIRCLE IS WATCHING.";
            if (attempts === 4) warningText.innerText = "CRITICAL ERROR. ONE ATTEMPT REMAINS. RUN.";

            // FINAL FAILURE
            if (attempts >= maxAttempts) {
                triggerJumpscare();
            }
        }

        function triggerJumpscare() {
            // Hide terminal
            mainTerminal.style.display = 'none';

            // Show Jumpscare
            jumpscareOverlay.style.display = 'flex';

            // Change background to emulate total failure
            document.body.style.backgroundColor = '#200000';

            // Wait 3 seconds, then show Game Over
            setTimeout(() => {
                jumpscareOverlay.style.display = 'none';
                gameOverScreen.style.display = 'flex';
            }, 3000);
        }

        // Input Listener
        inputField.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                const val = this.value.toUpperCase().trim();

                // WIN CONDITIONS (Edit these answers as needed)
                const validAnswers = ["HELLFIRE", "DANTE", "VERGIL", "BRITTO"];

                if (validAnswers.includes(val)) {
                    alert("ACCESS GRANTED. THE TRUTH IS REVEALED.");
                    // window.location.href = "final_truth.html";
                } else {
                    this.value = ""; // Clear input
                    handleIncorrectAttempt();
                }
            }
        });
    </script>
</body>

</html>